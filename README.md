
# **cNFTs Fractionalization**

---

The core requirements for a fractionalization protocol designed to work with compressed NFTs (for any project utilizing the cNFT standard ([MetaPlex Bubble Gum](https://developers.metaplex.com/bubblegum)). The goal is to enable cNFT owners to split their assets into SPL tokens (fungible fractions), distribute any accrued yield to fraction holders, and support a trustless reclaim mechanism (recovering the underlying cNFT) that respects all token holders fairly.

The protocol must operate in a decentralized, permissionless way, while remaining compatible with Metaplex standards and Solana-native primitives.

---

### **1\. Asset Locking & Fractional Tokenization**

* The protocol must allow a cNFT to be **locked in escrow while fractionalized**, held by a program-derived address (PDA).  
* Upon locking, the PDA **mints a fixed supply of SPL tokens** to represent fractional ownership of the NFT.  
* These SPL tokens ("fractions") are sent to the original cNFT owner, who may freely distribute or sell them.  
* SPL token metadata must **maintain a reference to the original cNFT**..  
* The PDA holds **mint and burn authority**, preventing unauthorized supply changes.

---

### **2\. NFT Reclaim Mechanism**

* Any user holding **80% or more of the total SPL token supply** is eligible to reclaim the original NFT.

* The reclaim flow must:

  * **Burn the reclaimer’s SPL tokens**, and  
  * **Transfer the cNFT** from the PDA escrow to the reclaimer’s wallet.  
  * **Compensate Minority holders (holding \<20%)** **at a fair market rate** for their invalidated tokens.  
* The reclaim price is set on-chain through a decentralized way and must reflect:

  * Historical AMM trading prices (e.g. TWAP),  
  * Yield generated by the asset  
* The reclaim mechanism must be **robust against inactivity**, allowing resolution even if some (all remaining 20%) holders are unreachable.

---

### **3\. Yield Distribution**

* The protocol must support one of two compatible revenue models:

  * **Passive Accumulation**: all yield is stored in the PDA and automatically transferred to the cNFT reclaimer along with the asset.  
  * **Active Distribution**: income is periodically distributed to SPL token holders based on **snapshot ownership data**.


### **4\. Project logistics**

1. SkyTrade Fractionalization is an open source project executed by the community of contributors with the support of [SkyTrade Foundation](https://skytrade.foundation).
2. You can contact us via [opensource@skytrade.foundation](mailto:opensource@skytrade.foundation).
3. All the open discussions are happening on GitHub Discussions here: https://github.com/orgs/SkyTradeLinks/discussions/categories/fractionalization-discussions


## Helius API key (important for deployments)

This project uses Helius DAS API for compressed NFT data. Do NOT expose your Helius API key to the browser. Follow these rules:

- Locally for development you can set a client-visible key in `.env.local` as `NEXT_PUBLIC_HELIUS_API_KEY` for convenience, but be aware this will be sent to the browser and may appear in network requests.
- For production/deployments (Vercel, etc.) set the key as a server environment variable named `HELIUS_API_KEY` (not `NEXT_PUBLIC_HELIUS_API_KEY`). The app includes a server API route that proxies Helius requests so the key stays server-side.
- In Vercel: go to Project Settings → Environment Variables and add `HELIUS_API_KEY` with the value. Mark it as `Production`/`Preview` as needed.

If you see the Helius key in the browser network tab after deployment, you've likely used a NEXT_PUBLIC key or called the Helius client directly from client-side code. Use the server API route `/api/helius/getAssetsByOwner?owner=<wallet>` instead; the client hooks in this repo already use it.

